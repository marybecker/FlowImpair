start_date  <- '2017-01-01';
end_date    <- '2018-01-01';
parameterCd<-'00060';
statCd      <-'00003';
D<-list(); #our empty list of list data sructure
for(i in 1:dim(indexgage)[1]){#read out all the individual data tables
site<-indexgage[i,1]
sfindex<-get_sfindex(site,base_url,start_date,end_date,parameterCd,statCd);
write.csv(sfindex,paste("data/",site,".csv",sep=""),row.names=FALSE)
for(j in 1:dim(sfindex)[1]){ #read through the rows and load data into D
d<-as.character(sfindex[j,'datetime']);
v<-sfindex[j,site];
if(is.null(D[[d]])){ #d is not in D =>(add a new datetime key and a new key site and index value v)
D[[d]]<-list();
D[[d]][[site]]<-v;
}else{               #d is in D =>(add a new key site and index value v)
D[[d]][[site]]<-v;
}
}
}
#[1]build a new empty dataframe E
n<-length(D);
m<- dim(indexgage)[1];
E<-matrix(NA,nrow=n,ncol=m);
dates<-sort(names(D))
colnames(E)<-indexgage[,1];
rownames(E)<-dates;
#[2]read from the D and write into E
for(i in 1:n){#for each datetime
sites <- names(D[[dates[i]]]); #sites in that datetime
for(j in 1:length(D[[dates[i]]])){#for each site
E[i,sites[j]]<-D[[dates[i]]][[j]];
}
}
findex<-as.data.frame(E)
findex$index<-rowMeans(findex,na.rm=TRUE)     #only run if first time run, if index exists will include in avg
findex$gagecnt<-(rowSums(!is.na(findex)))-1  #only run -1 if first time run, if gagecnt already exists than -2
findex[1:10,]
findex$sdate<- row.names(findex)
findex$sdate<- ymd(findex$sdate)
findex[1:10,]
ggplot(findex,aes(sdate,index))+
geom_line(colour="red",size=1.5)+
labs(y="Average streamflow index",x="2016",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))+
theme_light()
ggplot(findex,aes(sdate,index))+
geom_line(colour="red",size=1.5)+
labs(y="Average streamflow index",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))+
theme_light()
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin = -Inf,
xmax = Inf, ymin = ystart,
ymax = yend),alpha = 0.3,fill=rects$col)+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))
rects <- data.frame(ystart = c(0,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin = -Inf,
xmax = Inf, ymin = ystart,
ymax = yend),alpha = 0.3,fill=rects$col)+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))
rects
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin = -Inf,
xmax = Inf, ymin = ystart,
ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(ymin = ystart,
ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(index$sdate),xmax=max(index$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))+
theme_light()
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
rects <- data.frame(ystart = c(1,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,2,3,4,5,6,7),labels=c("Dry  1",2,3,"Normal  4",5,6,"Wet  7"))
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
ggplot()+
geom_line(data=findex, aes(sdate,index))+
geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
xlim(min(findex$sdate),max(findex$sdate))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p
p + geom_rect(data=rects,aes(xmin=min(findex$sdate),xmax=max(findex$sdate),
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
xstart <- as.POSIXct("2016-12-01 20:01:01 IST")
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
xstart <- as.POSIXct("2016-12-01 20:01:01 EST")
xend <- as.POSIXct("2018-01-31 20:01:01 EST")
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
xstart
xstart <- ("2016-12-01")
xend <- ("2018-01-31")
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
xstart <- min(findex$sdate)-30
xstart
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(0,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(1,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Least Disturbed Flow Index")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(0.5,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(1,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="Average streamflow index 2017",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
names(findex)
names(indexgage)
indexgage
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,01188000))+
labs(y="",x="",title="Flow Conditions At Bunnell Brook 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
names(findex)
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,01188000))+
labs(y="",x="",title="Flow Conditions At Bunnell Brook 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
ggplot()+
geom_line(data=findex, aes(sdate,01188000))+
labs(y="",x="",title="Flow Conditions At Bunnell Brook 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
findex
gfindex<- findex[,c('01188000','sdate')]
gfindex
gfindex<-gfindex[which(gfindex$`01188000`!="NA"),]
ggplot()+
geom_line(data=gfindex, aes(sdate,index))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex$gage!="NA"),]
gfindex
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex[1:10,]
gfindex[1]
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex[1]="NA"),]
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex[1]!="NA"),]
dim(gfindex)
gfindex[1:10,]
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(gfindex$sdate)-30
xend <- max(gfindex$sdate)+30
p<- ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_discrete(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_discrete(breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_discrete(limits=c(1:7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
class(findex$`01118300`)
class(findex$`01188000`)
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex[1]!="NA"),]
gfindex[1]<-gfindex$gage
gfindex[1:10,]
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex[1:10,]
gfindex<-gfindex[which(gfindex[1]!="NA"),]
colnames(gfindex)[1]<-"gage"
gfindex[1:10,]
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex[1]!="NA"),]
colnames(gfindex)[1]<-"gage"
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(gfindex$sdate)-30
xend <- max(gfindex$sdate)+30
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(gfindex,range(sdate)))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
xstart
xend
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
rects <- data.frame(ystart = c(0,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_hline(yintercept=c(3,5))
ggplot()+
geom_point(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_hline(yintercept=c(3,5))
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_hline(yintercept=c(3,5))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend))
findex$sdate<- row.names(findex)
findex$sdate<- ymd(findex$sdate)
#######Average SF Index Least Disturbed#####################
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
class(rects$yend)
class(rects$ystart)
class(xstart)
class(xend)
class(gfindex$sdate)
class(gfindex$gage)
p<- ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_hline(yintercept=c(3,5))
+ geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_hline(yintercept=c(3,5))+
geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(gfindex,range(sdate)))
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(gfindex,range(sdate)))
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Bunnell Brook 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Dry","Normal","Wet"))+
geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(gfindex,range(sdate)))
findex$sdate<- row.names(findex)
findex$sdate<- ymd(findex$sdate)
#######Average SF Index Least Disturbed#####################
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="",x="",title="Flow Conditions At Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Low","Normal","High"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
gage<-'01188000'
gfindex<- findex[,c(gage,'sdate')]
gfindex<-gfindex[which(gfindex[1]!="NA"),]
colnames(gfindex)[1]<-"gage"
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(gfindex$sdate)-30
xend <- max(gfindex$sdate)+30
ggplot()+
geom_line(data=gfindex, aes(sdate,gage))+
labs(y="",x="",title="Flow Conditions At Bunnell Brook 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Low","Normal","High"))+
geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(gfindex,range(sdate)))
rects <- data.frame(ystart = c(-Inf,3,5),
yend = c(3,5,Inf),
cat = c("low flow","normal","high"),
col=c("blue","purple","green"))
xstart <- min(findex$sdate)-30
xend <- max(findex$sdate)+30
p<- ggplot()+
geom_line(data=findex, aes(sdate,index))+
labs(y="",x="",title="Flow Conditions At 12 Least Disturbed Gages 2017")+
scale_y_continuous(limits=c(1,7),breaks=c(1,4,7),labels=c("Low","Normal","High"))
p + geom_rect(data=rects,aes(xmin=xstart,xmax=xend,
ymin = ystart, ymax = yend),alpha = 0.3,fill=rects$col)+
coord_cartesian(xlim=with(findex,range(sdate)))
